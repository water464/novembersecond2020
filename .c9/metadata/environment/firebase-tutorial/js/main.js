{"filter":false,"title":"main.js","tooltip":"/firebase-tutorial/js/main.js","undoManager":{"mark":80,"position":80,"stack":[[{"start":{"row":0,"column":0},"end":{"row":18,"column":3},"action":"insert","lines":["/* jshint curly:true, debug:true */","/* globals $, firebase */","","// ログイン状態の変化を監視する","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('ログインしました');","  } else {","    console.log('ログインしていません');","","    firebase","      .auth()","      .signInAnonymously() // 匿名ログインの実行","      .catch((error) => {","        // ログインに失敗したときの処理","        console.error('ログインエラー', error);","      });","  }","});"],"id":1}],[{"start":{"row":13,"column":1},"end":{"row":16,"column":9},"action":"remove","lines":["     .catch((error) => {","        // ログインに失敗したときの処理","        console.error('ログインエラー', error);","      });"],"id":2},{"start":{"row":13,"column":1},"end":{"row":20,"column":5},"action":"insert","lines":["  .then((user) => {","    // ログインに成功したときの処理","    console.log(user);","  })","  .catch((error) => {","    // ログインに失敗したときの処理","    console.error('ログインエラー', error);","  });"]}],[{"start":{"row":13,"column":2},"end":{"row":13,"column":4},"action":"insert","lines":["  "],"id":3}],[{"start":{"row":13,"column":5},"end":{"row":13,"column":6},"action":"insert","lines":[" "],"id":4}],[{"start":{"row":14,"column":4},"end":{"row":14,"column":6},"action":"insert","lines":["  "],"id":5}],[{"start":{"row":15,"column":4},"end":{"row":15,"column":6},"action":"insert","lines":["  "],"id":6}],[{"start":{"row":15,"column":6},"end":{"row":15,"column":8},"action":"insert","lines":["  "],"id":7}],[{"start":{"row":16,"column":2},"end":{"row":16,"column":4},"action":"insert","lines":["  "],"id":8}],[{"start":{"row":16,"column":4},"end":{"row":16,"column":6},"action":"insert","lines":["  "],"id":9}],[{"start":{"row":17,"column":2},"end":{"row":17,"column":4},"action":"insert","lines":["  "],"id":10}],[{"start":{"row":17,"column":4},"end":{"row":17,"column":6},"action":"insert","lines":["  "],"id":11}],[{"start":{"row":18,"column":4},"end":{"row":18,"column":6},"action":"insert","lines":["  "],"id":12}],[{"start":{"row":19,"column":4},"end":{"row":19,"column":6},"action":"insert","lines":["  "],"id":13}],[{"start":{"row":19,"column":6},"end":{"row":19,"column":8},"action":"insert","lines":["  "],"id":14}],[{"start":{"row":20,"column":2},"end":{"row":20,"column":4},"action":"insert","lines":["  "],"id":15}],[{"start":{"row":20,"column":4},"end":{"row":20,"column":6},"action":"insert","lines":["  "],"id":16}],[{"start":{"row":3,"column":0},"end":{"row":22,"column":3},"action":"remove","lines":["// ログイン状態の変化を監視する","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('ログインしました');","  } else {","    console.log('ログインしていません');","","    firebase","      .auth()","      .signInAnonymously() // 匿名ログインの実行","      .then((user) => {","      // ログインに成功したときの処理","        console.log(user);","      })","      .catch((error) => {","      // ログインに失敗したときの処理","        console.error('ログインエラー', error);","      });","  }","});"],"id":17},{"start":{"row":3,"column":0},"end":{"row":24,"column":3},"action":"insert","lines":["// ログイン状態の変化を監視する","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('ログインしました');","","    // mykeyにデータを保存する","    firebase","      .database()","      .ref('mykey')","      .set('myvalue');","  } else {","    console.log('ログインしていません');","","    firebase","      .auth()","      .signInAnonymously() // 匿名ログインの実行","      .catch((error) => {","        // ログインに失敗したときの処理","        console.error('ログインエラー', error);","      });","  }","});"]}],[{"start":{"row":0,"column":0},"end":{"row":24,"column":3},"action":"remove","lines":["/* jshint curly:true, debug:true */","/* globals $, firebase */","","// ログイン状態の変化を監視する","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('ログインしました');","","    // mykeyにデータを保存する","    firebase","      .database()","      .ref('mykey')","      .set('myvalue');","  } else {","    console.log('ログインしていません');","","    firebase","      .auth()","      .signInAnonymously() // 匿名ログインの実行","      .catch((error) => {","        // ログインに失敗したときの処理","        console.error('ログインエラー', error);","      });","  }","});"],"id":18},{"start":{"row":0,"column":0},"end":{"row":57,"column":3},"action":"insert","lines":["// 初期値を設定","let num = 0;","","const getValue = () => {","  // 現在のmykeyの値を取得","  firebase","    .database()","    .ref('mykey')","    .on('value', (snapshot) => {","      // データの取得が完了すると実行される","","      const snapshotValue = snapshot.val();","","      // 取得した値が数値かを判定","      if (Number.isFinite(snapshotValue)) {","        num = snapshotValue;","      }","","      console.log(`Got value: ${num}`);","    });","};","","const setValue = () => {","  num += 1;","  console.log(`set: ${num}`);","","  // Firebase上のmykeyの値を更新","  firebase","    .database()","    .ref('mykey')","    .set(num);","};","","const logIn = () => {","  firebase","    .auth()","    .signInAnonymously() // 匿名ログインの実行","    .catch((error) => {","      // ログインに失敗したときの処理","      console.error('ログインエラー', error);","    });","};","","// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('ログインしました');","    getValue();","  } else {","    console.log('ログインしていません');","    logIn();","  }","});","","// id=\"my-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#my-button').on('click', () => {","  setValue();","});"]}],[{"start":{"row":0,"column":0},"end":{"row":57,"column":3},"action":"remove","lines":["// 初期値を設定","let num = 0;","","const getValue = () => {","  // 現在のmykeyの値を取得","  firebase","    .database()","    .ref('mykey')","    .on('value', (snapshot) => {","      // データの取得が完了すると実行される","","      const snapshotValue = snapshot.val();","","      // 取得した値が数値かを判定","      if (Number.isFinite(snapshotValue)) {","        num = snapshotValue;","      }","","      console.log(`Got value: ${num}`);","    });","};","","const setValue = () => {","  num += 1;","  console.log(`set: ${num}`);","","  // Firebase上のmykeyの値を更新","  firebase","    .database()","    .ref('mykey')","    .set(num);","};","","const logIn = () => {","  firebase","    .auth()","    .signInAnonymously() // 匿名ログインの実行","    .catch((error) => {","      // ログインに失敗したときの処理","      console.error('ログインエラー', error);","    });","};","","// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('ログインしました');","    getValue();","  } else {","    console.log('ログインしていません');","    logIn();","  }","});","","// id=\"my-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#my-button').on('click', () => {","  setValue();","});"],"id":19},{"start":{"row":0,"column":0},"end":{"row":68,"column":3},"action":"insert","lines":["// 初期値を設定","let num = 0;","","const getValue = () => {","  // 現在のmykeyの値を取得","  firebase","    .database()","    .ref('mykey')","    .on('value', (snapshot) => {","      // データの取得が完了すると実行される","","      const snapshotValue = snapshot.val();","","      // 取得した値が数値かを判定","      if (Number.isFinite(snapshotValue)) {","        num = snapshotValue;","      }","","      console.log(`Got value: ${num}`);","    });","};","","const setValue = () => {","  num += 1;","  console.log(`set: ${num}`);","","  // Firebase上のmykeyの値を更新","  firebase","    .database()","    .ref('mykey')","    .set(num);","};","","const logIn = (mail, pass) => {","  firebase","    .auth()","    .signInWithEmailAndPassword(mail, pass) // ログイン実行","    .then((user) => {","      // ログインに成功したときの処理","      console.log('ログインしました', user);","    })","    .catch((error) => {","      // ログインに失敗したときの処理","      console.error('ログインエラー', error);","    });","};","","// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中');","    getValue();","  } else {","    console.log('状態：ログアウト');","  }","});","","// id=\"my-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#my-button').on('click', () => {","  setValue();","});","","// id=\"login-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#login-button').on('click', () => {","  const mail = $('#user-mail').val();","  const pass = $('#user-pass').val();","","  logIn(mail, pass);","});"]}],[{"start":{"row":46,"column":0},"end":{"row":47,"column":0},"action":"insert","lines":["",""],"id":20}],[{"start":{"row":47,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["const logOut = () => {","  firebase","    .auth()","    .signOut() // ログアウト実行","    .then(() => {","      // ログアウトに成功したときの処理","      console.log('ログアウトしました');","    })","    .catch((error) => {","      // ログアウトに失敗したときの処理","      console.error('ログアウトエラー', error);","    });","};"],"id":21}],[{"start":{"row":59,"column":2},"end":{"row":60,"column":0},"action":"insert","lines":["",""],"id":22}],[{"start":{"row":82,"column":3},"end":{"row":83,"column":0},"action":"insert","lines":["",""],"id":23},{"start":{"row":83,"column":0},"end":{"row":84,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":84,"column":0},"end":{"row":87,"column":3},"action":"insert","lines":["// id=\"logout-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#logout-button').on('click', () => {","  logOut();","});"],"id":24}],[{"start":{"row":61,"column":0},"end":{"row":70,"column":0},"action":"remove","lines":["// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中');","    getValue();","  } else {","    console.log('状態：ログアウト');","  }","});",""],"id":25},{"start":{"row":61,"column":0},"end":{"row":69,"column":3},"action":"insert","lines":["// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中', user);","    getValue();","  } else {","    console.log('状態：ログアウト', user);","  }","});"]}],[{"start":{"row":69,"column":3},"end":{"row":70,"column":0},"action":"insert","lines":["",""],"id":26}],[{"start":{"row":1,"column":12},"end":{"row":2,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":3,"column":0},"end":{"row":5,"column":0},"action":"insert","lines":["// ログインユーザのUID","let currentUID = null;",""],"id":28}],[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":29}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["",""],"id":30},{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":64,"column":0},"end":{"row":72,"column":3},"action":"remove","lines":["// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中', user);","    getValue();","  } else {","    console.log('状態：ログアウト', user);","  }","});"],"id":31},{"start":{"row":64,"column":0},"end":{"row":74,"column":3},"action":"insert","lines":["// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中');","    currentUID = user.uid;","    getValue();","  } else {","    console.log('状態：ログアウト');","    currentUID = null;","  }","});"]}],[{"start":{"row":0,"column":0},"end":{"row":92,"column":3},"action":"remove","lines":["// 初期値を設定","let num = 0;","","// ログインユーザのUID","let currentUID = null;","","const getValue = () => {","  // 現在のmykeyの値を取得","  firebase","    .database()","    .ref('mykey')","    .on('value', (snapshot) => {","      // データの取得が完了すると実行される","","      const snapshotValue = snapshot.val();","","      // 取得した値が数値かを判定","      if (Number.isFinite(snapshotValue)) {","        num = snapshotValue;","      }","","      console.log(`Got value: ${num}`);","    });","};","","const setValue = () => {","  num += 1;","  console.log(`set: ${num}`);","","  // Firebase上のmykeyの値を更新","  firebase","    .database()","    .ref('mykey')","    .set(num);","};","","const logIn = (mail, pass) => {","  firebase","    .auth()","    .signInWithEmailAndPassword(mail, pass) // ログイン実行","    .then((user) => {","      // ログインに成功したときの処理","      console.log('ログインしました', user);","    })","    .catch((error) => {","      // ログインに失敗したときの処理","      console.error('ログインエラー', error);","    });","};","","const logOut = () => {","  firebase","    .auth()","    .signOut() // ログアウト実行","    .then(() => {","      // ログアウトに成功したときの処理","      console.log('ログアウトしました');","    })","    .catch((error) => {","      // ログアウトに失敗したときの処理","      console.error('ログアウトエラー', error);","    });","};","","// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中');","    currentUID = user.uid;","    getValue();","  } else {","    console.log('状態：ログアウト');","    currentUID = null;","  }","});","","// id=\"my-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#my-button').on('click', () => {","  setValue();","});","","// id=\"login-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#login-button').on('click', () => {","  const mail = $('#user-mail').val();","  const pass = $('#user-pass').val();","","  logIn(mail, pass);","});","","// id=\"logout-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#logout-button').on('click', () => {","  logOut();","});"],"id":32},{"start":{"row":0,"column":0},"end":{"row":116,"column":3},"action":"insert","lines":["// 初期値を設定","let num = 0;","","// ログインユーザのUID","let currentUID = null;","","const getValue = () => {","  // 現在のmykeyの値を取得","  firebase","    .database()","    .ref('mykey')","    .on('value', (snapshot) => {","      // データの取得が完了すると実行される","","      const snapshotValue = snapshot.val();","","      // 取得した値が数値かを判定","      if (Number.isFinite(snapshotValue)) {","        num = snapshotValue;","      }","","      console.log(`Got value: ${num}`);","    });","};","","const setValue = () => {","  num += 1;","  console.log(`set: ${num}`);","","  // Firebase上のmykeyの値を更新","  firebase","    .database()","    .ref('mykey')","    .set(num);","};","","const logIn = (mail, pass) => {","  firebase","    .auth()","    .signInWithEmailAndPassword(mail, pass) // ログイン実行","    .then((user) => {","      // ログインに成功したときの処理","      console.log('ログインしました', user);","    })","    .catch((error) => {","      // ログインに失敗したときの処理","      console.error('ログインエラー', error);","    });","};","","const logOut = () => {","  firebase","    .auth()","    .signOut() // ログアウト実行","    .then(() => {","      // ログアウトに成功したときの処理","      console.log('ログアウトしました');","    })","    .catch((error) => {","      // ログアウトに失敗したときの処理","      console.error('ログインエラー', error);","    });","};","","const changeView = () => {","  if (currentUID != null) {","    // ログイン状態のとき","    $('.visible-on-login')","      .removeClass('hidden-block')","      .addClass('visible-block');","","    $('.visible-on-logout')","      .removeClass('visible-block')","      .addClass('hidden-block');","  } else {","    // ログアウト状態のとき","    $('.visible-on-login')","      .removeClass('visible-block')","      .addClass('hidden-block');","","    $('.visible-on-logout')","      .removeClass('hidden-block')","      .addClass('visible-block');","  }","};","","// ユーザのログイン状態が変化したら呼び出される、コールバック関数を登録","firebase.auth().onAuthStateChanged((user) => {","  if (user) {","    console.log('状態：ログイン中');","    currentUID = user.uid;","    changeView();","    getValue();","  } else {","    console.log('状態：ログアウト');","    currentUID = null;","    changeView();","  }","});","","// id=\"my-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#my-button').on('click', () => {","  setValue();","});","","// id=\"login-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#login-button').on('click', () => {","  const mail = $('#user-mail').val();","  const pass = $('#user-pass').val();","","  logIn(mail, pass);","});","","// id=\"logout-button\"をクリックしたら呼び出される、イベントハンドラを登録","$('#logout-button').on('click', () => {","  logOut();","});"]}],[{"start":{"row":73,"column":32},"end":{"row":74,"column":0},"action":"insert","lines":["",""],"id":33},{"start":{"row":74,"column":0},"end":{"row":74,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":74,"column":4},"end":{"row":74,"column":6},"action":"remove","lines":["  "],"id":34}],[{"start":{"row":74,"column":4},"end":{"row":74,"column":5},"action":"insert","lines":["$"],"id":35}],[{"start":{"row":74,"column":5},"end":{"row":74,"column":7},"action":"insert","lines":["()"],"id":36}],[{"start":{"row":74,"column":6},"end":{"row":74,"column":8},"action":"insert","lines":["''"],"id":37}],[{"start":{"row":74,"column":7},"end":{"row":74,"column":8},"action":"insert","lines":["#"],"id":38}],[{"start":{"row":74,"column":8},"end":{"row":74,"column":9},"action":"insert","lines":["m"],"id":39},{"start":{"row":74,"column":9},"end":{"row":74,"column":10},"action":"insert","lines":["y"]}],[{"start":{"row":74,"column":10},"end":{"row":74,"column":11},"action":"insert","lines":["-"],"id":40},{"start":{"row":74,"column":11},"end":{"row":74,"column":12},"action":"insert","lines":["b"]},{"start":{"row":74,"column":12},"end":{"row":74,"column":13},"action":"insert","lines":["u"]}],[{"start":{"row":74,"column":13},"end":{"row":74,"column":14},"action":"insert","lines":["t"],"id":41},{"start":{"row":74,"column":14},"end":{"row":74,"column":15},"action":"insert","lines":["t"]},{"start":{"row":74,"column":15},"end":{"row":74,"column":16},"action":"insert","lines":["o"]},{"start":{"row":74,"column":16},"end":{"row":74,"column":17},"action":"insert","lines":["n"]}],[{"start":{"row":74,"column":19},"end":{"row":75,"column":0},"action":"insert","lines":["",""],"id":42},{"start":{"row":75,"column":0},"end":{"row":75,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":75,"column":4},"end":{"row":75,"column":6},"action":"insert","lines":["  "],"id":43}],[{"start":{"row":75,"column":6},"end":{"row":75,"column":7},"action":"insert","lines":["."],"id":44}],[{"start":{"row":75,"column":7},"end":{"row":75,"column":8},"action":"insert","lines":["r"],"id":45},{"start":{"row":75,"column":8},"end":{"row":75,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":75,"column":8},"end":{"row":75,"column":9},"action":"remove","lines":["e"],"id":46},{"start":{"row":75,"column":7},"end":{"row":75,"column":8},"action":"remove","lines":["r"]}],[{"start":{"row":75,"column":7},"end":{"row":75,"column":8},"action":"insert","lines":["a"],"id":47},{"start":{"row":75,"column":8},"end":{"row":75,"column":9},"action":"insert","lines":["d"]},{"start":{"row":75,"column":9},"end":{"row":75,"column":10},"action":"insert","lines":["d"]},{"start":{"row":75,"column":10},"end":{"row":75,"column":11},"action":"insert","lines":["C"]}],[{"start":{"row":75,"column":11},"end":{"row":75,"column":12},"action":"insert","lines":["l"],"id":48},{"start":{"row":75,"column":12},"end":{"row":75,"column":13},"action":"insert","lines":["a"]},{"start":{"row":75,"column":13},"end":{"row":75,"column":14},"action":"insert","lines":["s"]},{"start":{"row":75,"column":14},"end":{"row":75,"column":15},"action":"insert","lines":["s"]}],[{"start":{"row":75,"column":15},"end":{"row":75,"column":17},"action":"insert","lines":["()"],"id":49}],[{"start":{"row":75,"column":16},"end":{"row":75,"column":18},"action":"insert","lines":["''"],"id":50}],[{"start":{"row":75,"column":17},"end":{"row":75,"column":18},"action":"insert","lines":["h"],"id":51},{"start":{"row":75,"column":18},"end":{"row":75,"column":19},"action":"insert","lines":["i"]},{"start":{"row":75,"column":19},"end":{"row":75,"column":20},"action":"insert","lines":["d"]},{"start":{"row":75,"column":20},"end":{"row":75,"column":21},"action":"insert","lines":["d"]},{"start":{"row":75,"column":21},"end":{"row":75,"column":22},"action":"insert","lines":["e"]}],[{"start":{"row":75,"column":22},"end":{"row":75,"column":23},"action":"insert","lines":["n"],"id":52},{"start":{"row":75,"column":23},"end":{"row":75,"column":24},"action":"insert","lines":["-"]}],[{"start":{"row":75,"column":24},"end":{"row":75,"column":25},"action":"insert","lines":["b"],"id":53},{"start":{"row":75,"column":25},"end":{"row":75,"column":26},"action":"insert","lines":["l"]},{"start":{"row":75,"column":26},"end":{"row":75,"column":27},"action":"insert","lines":["o"]},{"start":{"row":75,"column":27},"end":{"row":75,"column":28},"action":"insert","lines":["c"]},{"start":{"row":75,"column":28},"end":{"row":75,"column":29},"action":"insert","lines":["k"]}],[{"start":{"row":75,"column":31},"end":{"row":75,"column":32},"action":"insert","lines":[";"],"id":54}],[{"start":{"row":74,"column":0},"end":{"row":75,"column":32},"action":"remove","lines":["    $('#my-button')","      .addClass('hidden-block');"],"id":55}],[{"start":{"row":80,"column":0},"end":{"row":81,"column":32},"action":"insert","lines":["    $('#my-button')","      .addClass('hidden-block');"],"id":56}],[{"start":{"row":81,"column":32},"end":{"row":82,"column":0},"action":"insert","lines":["",""],"id":57},{"start":{"row":82,"column":0},"end":{"row":82,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":70,"column":0},"end":{"row":71,"column":32},"action":"insert","lines":["    $('#my-button')","      .addClass('hidden-block');"],"id":58}],[{"start":{"row":71,"column":22},"end":{"row":71,"column":23},"action":"remove","lines":["n"],"id":59},{"start":{"row":71,"column":21},"end":{"row":71,"column":22},"action":"remove","lines":["e"]},{"start":{"row":71,"column":20},"end":{"row":71,"column":21},"action":"remove","lines":["d"]},{"start":{"row":71,"column":19},"end":{"row":71,"column":20},"action":"remove","lines":["d"]},{"start":{"row":71,"column":18},"end":{"row":71,"column":19},"action":"remove","lines":["i"]},{"start":{"row":71,"column":17},"end":{"row":71,"column":18},"action":"remove","lines":["h"]}],[{"start":{"row":71,"column":17},"end":{"row":71,"column":18},"action":"insert","lines":["v"],"id":60},{"start":{"row":71,"column":18},"end":{"row":71,"column":19},"action":"insert","lines":["i"]},{"start":{"row":71,"column":19},"end":{"row":71,"column":20},"action":"insert","lines":["s"]}],[{"start":{"row":71,"column":17},"end":{"row":71,"column":20},"action":"remove","lines":["vis"],"id":61},{"start":{"row":71,"column":17},"end":{"row":71,"column":24},"action":"insert","lines":["visible"]}],[{"start":{"row":70,"column":19},"end":{"row":71,"column":0},"action":"insert","lines":["",""],"id":62},{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":82,"column":19},"end":{"row":83,"column":0},"action":"insert","lines":["",""],"id":63},{"start":{"row":83,"column":0},"end":{"row":83,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":71,"column":4},"end":{"row":71,"column":32},"action":"insert","lines":["  .addClass('hidden-block');"],"id":64}],[{"start":{"row":71,"column":9},"end":{"row":71,"column":10},"action":"remove","lines":["d"],"id":65},{"start":{"row":71,"column":8},"end":{"row":71,"column":9},"action":"remove","lines":["d"]},{"start":{"row":71,"column":7},"end":{"row":71,"column":8},"action":"remove","lines":["a"]}],[{"start":{"row":71,"column":7},"end":{"row":71,"column":8},"action":"insert","lines":["r"],"id":66},{"start":{"row":71,"column":8},"end":{"row":71,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":71,"column":7},"end":{"row":71,"column":14},"action":"remove","lines":["reClass"],"id":67},{"start":{"row":71,"column":7},"end":{"row":71,"column":18},"action":"insert","lines":["removeClass"]}],[{"start":{"row":83,"column":4},"end":{"row":83,"column":32},"action":"insert","lines":["  .addClass('hidden-block');"],"id":68}],[{"start":{"row":83,"column":9},"end":{"row":83,"column":10},"action":"remove","lines":["d"],"id":69},{"start":{"row":83,"column":8},"end":{"row":83,"column":9},"action":"remove","lines":["d"]},{"start":{"row":83,"column":7},"end":{"row":83,"column":8},"action":"remove","lines":["a"]}],[{"start":{"row":83,"column":7},"end":{"row":83,"column":8},"action":"insert","lines":["r"],"id":70},{"start":{"row":83,"column":8},"end":{"row":83,"column":9},"action":"insert","lines":["e"]}],[{"start":{"row":83,"column":7},"end":{"row":83,"column":14},"action":"remove","lines":["reClass"],"id":71},{"start":{"row":83,"column":7},"end":{"row":83,"column":18},"action":"insert","lines":["removeClass"]}],[{"start":{"row":83,"column":25},"end":{"row":83,"column":26},"action":"remove","lines":["n"],"id":72},{"start":{"row":83,"column":24},"end":{"row":83,"column":25},"action":"remove","lines":["e"]},{"start":{"row":83,"column":23},"end":{"row":83,"column":24},"action":"remove","lines":["d"]},{"start":{"row":83,"column":22},"end":{"row":83,"column":23},"action":"remove","lines":["d"]},{"start":{"row":83,"column":21},"end":{"row":83,"column":22},"action":"remove","lines":["i"]},{"start":{"row":83,"column":20},"end":{"row":83,"column":21},"action":"remove","lines":["h"]}],[{"start":{"row":83,"column":20},"end":{"row":83,"column":21},"action":"insert","lines":["v"],"id":73},{"start":{"row":83,"column":21},"end":{"row":83,"column":22},"action":"insert","lines":["i"]},{"start":{"row":83,"column":22},"end":{"row":83,"column":23},"action":"insert","lines":["s"]},{"start":{"row":83,"column":23},"end":{"row":83,"column":24},"action":"insert","lines":["i"]}],[{"start":{"row":83,"column":20},"end":{"row":83,"column":24},"action":"remove","lines":["visi"],"id":74},{"start":{"row":83,"column":20},"end":{"row":83,"column":27},"action":"insert","lines":["visible"]}],[{"start":{"row":71,"column":34},"end":{"row":71,"column":35},"action":"remove","lines":[";"],"id":75}],[{"start":{"row":83,"column":35},"end":{"row":83,"column":36},"action":"remove","lines":[";"],"id":76}],[{"start":{"row":91,"column":0},"end":{"row":92,"column":0},"action":"insert","lines":["",""],"id":77},{"start":{"row":92,"column":0},"end":{"row":93,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":92,"column":0},"end":{"row":106,"column":2},"action":"insert","lines":["const uploadImage = (file) => {","  const fileName = 'sample/test';","  firebase","    .storage()","    .ref(fileName)","    .put(file) // ファイルアップロードを実行","    .then((snapshot) => {","      // アップロード処理に成功したときの処理","      console.log(snapshot);","    })","    .catch((error) => {","      // アップロード処理に失敗したときの処理","      console.error('ファイルアップロードエラー', error);","    });","};"],"id":78}],[{"start":{"row":138,"column":3},"end":{"row":139,"column":0},"action":"insert","lines":["",""],"id":79},{"start":{"row":139,"column":0},"end":{"row":140,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":140,"column":0},"end":{"row":153,"column":3},"action":"insert","lines":["// id=\"upload-image\"でファイルが選択されたら、イベントハンドラを登録","$('#upload-image').on('change', (e) => {","  const { files } = e.target;","","  if (files.length === 0) {","    // ファイルが選択されていないなら何もしない","    return;","  }","","  const file = files[0];","","  // Storageにアップロード","  uploadImage(file);","});"],"id":80}],[{"start":{"row":92,"column":0},"end":{"row":106,"column":2},"action":"remove","lines":["const uploadImage = (file) => {","  const fileName = 'sample/test';","  firebase","    .storage()","    .ref(fileName)","    .put(file) // ファイルアップロードを実行","    .then((snapshot) => {","      // アップロード処理に成功したときの処理","      console.log(snapshot);","    })","    .catch((error) => {","      // アップロード処理に失敗したときの処理","      console.error('ファイルアップロードエラー', error);","    });","};"],"id":81},{"start":{"row":92,"column":0},"end":{"row":121,"column":2},"action":"insert","lines":["const downloadImage = (fileName) => {","  firebase","    .storage()","    .ref(fileName)","    .getDownloadURL() // 画像のURLを取得","    .then((url) => {","      // URLの取得に成功したときの処理","      $('#upload-image-preview').attr('src', url); // ページ上に画像を表示","    })","    .catch((error) => {","      // URLの取得に失敗したときの処理","      console.error('URL取得エラー', error);","    });","};","","const uploadImage = (file) => {","  const fileName = 'sample/test';","  firebase","    .storage()","    .ref(fileName)","    .put(file) // ファイルアップロードを実行","    .then(() => {","      // アップロード処理に成功したときの処理","      downloadImage(fileName);","    })","    .catch((error) => {","      // アップロード処理に失敗したときの処理","      console.error('ファイルアップロードエラー', error);","    });","};"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":8},"end":{"row":7,"column":13},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1580350272344,"hash":"4d4ff1763b7d1e08ede222fa22d94f129306f9d5"}