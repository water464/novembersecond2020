{"filter":false,"title":"main.js","tooltip":"/bookshelf/main.js","undoManager":{"mark":7,"position":7,"stack":[[{"start":{"row":153,"column":19},"end":{"row":154,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":154,"column":0},"end":{"row":154,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":154,"column":2},"end":{"row":174,"column":7},"action":"insert","lines":[" firebase","    .auth()","    .signInWithEmailAndPassword(email, password)","    .then(() => {","      // ログインに成功したときの処理","      console.log('ログインしました。');","","      // ログインフォームを初期状態に戻す","      resetLoginForm();","    })","    .catch((error) => {","      // ログインに失敗したときの処理","      console.error('ログインエラー', error);","","      $('#login__help')","        .text('ログインに失敗しました。')","        .show();","","      // ログインボタンを元に戻す","      $loginButton.text('ログイン');","    });"],"id":3}],[{"start":{"row":154,"column":2},"end":{"row":154,"column":3},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":154,"column":2},"end":{"row":154,"column":4},"action":"insert","lines":["  "],"id":5}],[{"start":{"row":154,"column":2},"end":{"row":154,"column":4},"action":"remove","lines":["  "],"id":6}],[{"start":{"row":239,"column":0},"end":{"row":267,"column":7},"action":"insert","lines":[" firebase","    .storage()","    .ref(bookImageLocation)","    .put(file) // Storageへファイルアップロードを実行","    .then(() => {","      // Storageへのアップロードに成功したら、Realtime Databaseに書籍データを保存する","      const bookData = {","        bookTitle,","        bookImageLocation,","        createdAt: firebase.database.ServerValue.TIMESTAMP,","      };","      return firebase","        .database()","        .ref('books')","        .push(bookData);","    })","    .then(() => {","      // 書籍一覧画面の書籍の登録モーダルを閉じて、初期状態に戻す","      $('#add-book-modal').modal('hide');","      resetAddBookModal();","    })","    .catch((error) => {","      // 失敗したとき","      console.error('エラー', error);","      resetAddBookModal();","      $('#add-book__help')","        .text('保存できませんでした。')","        .fadeIn();","    });"],"id":7}],[{"start":{"row":239,"column":0},"end":{"row":239,"column":1},"action":"remove","lines":[" "],"id":8}],[{"start":{"row":239,"column":0},"end":{"row":239,"column":2},"action":"insert","lines":["  "],"id":9}]]},"ace":{"folds":[],"scrolltop":1363,"scrollleft":0,"selection":{"start":{"row":239,"column":2},"end":{"row":239,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":89,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1580352783644,"hash":"20922ae9feb60e7c7ba8e62be1e3a8d28689f8bf"}