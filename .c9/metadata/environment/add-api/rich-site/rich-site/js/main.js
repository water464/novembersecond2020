{"filter":false,"title":"main.js","tooltip":"/add-api/rich-site/rich-site/js/main.js","ace":{"folds":[],"scrolltop":5342.5,"scrollleft":0,"selection":{"start":{"row":348,"column":3},"end":{"row":348,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"c3c3e1a3d8a1e9c753d3f8904fe1775c17854089","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":243,"column":0},"end":{"row":244,"column":0},"action":"insert","lines":["",""],"id":58},{"start":{"row":244,"column":0},"end":{"row":245,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":244,"column":0},"end":{"row":256,"column":18},"action":"insert","lines":["const parameters2 = $.param({","  method: 'flickr.photos.search',","  api_key: apiKey,","  text: 'puppies dog puppy', // 検索テキスト","  sort: 'interestingness-desc', // 興味深さ順","  per_page: 4, // 取得件数","  license: '4', // Creative Commons Attributionのみ","  extras: 'owner_name,license', // 追加で取得する情報","  format: 'json', // レスポンスをJSON形式に","  nojsoncallback: 1, // レスポンスの先頭に関数呼び出しを含めない","});","const url2 = `https://api.flickr.com/services/rest/?${parameters2}`;","console.log(url2);"],"id":59}],[{"start":{"row":272,"column":2},"end":{"row":272,"column":3},"action":"insert","lines":["/"],"id":60},{"start":{"row":272,"column":3},"end":{"row":272,"column":4},"action":"insert","lines":["/"]}],[{"start":{"row":302,"column":3},"end":{"row":303,"column":0},"action":"insert","lines":["",""],"id":61},{"start":{"row":303,"column":0},"end":{"row":304,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":304,"column":0},"end":{"row":348,"column":3},"action":"insert","lines":["// 犬の画像を検索して表示","$.getJSON(url2, (data) => {","  console.log(data);","","  // データが取得できなかった場合","  if (data.stat !== 'ok') {","    console.error('データの取得に失敗しました。');","    return;","  }","","  // 空の<div>を作る","  const $div2 = $('<div>');","","  // ヒット件数","  //$div2.append(`<div>${data.photos.total} photos in total</div>`);","","  for (let i = 0; i < data.photos.photo.length; i++) {","    const photo = data.photos.photo[i];","    const photoText = getFlickrText(photo);","","    // $divに <a href=\"...\" ...><img src=\"...\" ...></a> を追加する","    $div2.append(","      $('<a>', {","        href: getFlickrPageURL(photo),","        class: 'd-inline-block',","        target: '_blank', // リンクを新規タブで開く","        'data-toggle': 'tooltip',","        'data-placement': 'bottom',","        title: photoText,","      }).append(","        $('<img>', {","          src: getFlickrImageURL(photo, 'q'),","          width: 150,","          height: 150,","          alt: photoText,","        }),","      ),","    );","  }","  // $div2を#mainに追加する","  $div2.appendTo('#main');","","  // BootstrapのTooltipを適用","  $('[data-toggle=\"tooltip\"]').tooltip();","});"],"id":62}]]},"timestamp":1580202314950}